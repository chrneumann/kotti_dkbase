<html xmlns="http://www.w3.org/1999/xhtml"
      metal:define-macro="main"
      tal:define="is_error isinstance(api.context, Exception); page_slots api.slots"
      lang="de"
>
  <head

> 
    <meta charset="utf-8" />
    <title metal:define-slot="page-title">${api.page_title | api.site_title}</title>
    <meta name="description" content="${api.context.description | ''}" />
    <div tal:replace="api.render_template('kotti_dkbase:templates/view/master-kotti-headers.pt')" />
    <more tal:omit-tag="" metal:define-slot="head-more"></more>
    <link href="${request.static_url('kotti_dkbase:static/custom.css')}" rel="stylesheet" />
    <tal:slots tal:define="snippets not is_error and page_slots and page_slots.inhead"
               tal:condition="snippets"
               tal:repeat="snippet snippets"
               tal:replace="structure snippet" />
  </head>

  <body class="${not is_error and api.user is not None and 'logged-in'}
               view-${request.view_name or 'default'}
               ${api.body_css_class}">
    <div tal:content="api.render_template('kotti_dkbase:templates/view/master-body-top.pt')"></div>
    <div tal:condition="not is_error and api.user is not None and not is_error"
         tal:replace="api.render_template('kotti:templates/editor-bar.pt')" />
    <div class="container main-container">
      <div class="content">
	<div class="page-header">
	  <a href="/"><img alt="Datenkarussell" src="/static-kotti/logo.png"/></a>
	  <ul tal:condition="not is_error" class="nav nav-tabs">
	    <li class="${api.root == api.context and 'active'}">
	      <a href="${request.application_url}">Startseite</a>
	    </li>
	    <li tal:define="items [i for i in api.list_children(api.root) if i.in_navigation]"
		tal:repeat="item items"
		class="${api.inside(api.context, item) and 'active' or None}">
	      <a href="${api.url(item)}" title="${item.description}">${item.title}</a>
	    </li>
	  </ul>
	</div>
        <div class="row">
          <div class="span3 left-column"
               tal:condition="not is_error and page_slots.left"
               tal:content="api.render_template('kotti:templates/render_column_slot.pt', slot=page_slots.left)">
          </div>

          <div tal:define="span is_error and 12 or 12 - int(bool(page_slots.left)) * 3 - int(bool(page_slots.right)) * 4" class="span${span}">
            <div class="above-content"
                 tal:condition="not is_error and page_slots.abovecontent"
                 tal:content="api.render_template('kotti:templates/render_content_slot.pt', slot=page_slots.abovecontent)">
            </div>

            <div tal:condition="not is_error" tal:replace="api.render_template('kotti:templates/messages.pt')" />

            <div class="inner-content">
              <div metal:define-slot="content">
                <h1>${api.context.title}</h1>
              </div>
            </div>

            <div class="below-content"
		 tal:condition="not is_error and page_slots.belowcontent"
                 tal:content="api.render_template('kotti:templates/render_content_slot.pt', slot=page_slots.belowcontent)">
            </div>
          </div>

          <div class="span4 right-column"
	       tal:condition="not is_error and page_slots.right"
               tal:content="api.render_template('kotti:templates/render_column_slot.pt', slot=page_slots.right)">
          </div>
        </div>
      </div>
      <div class="push"></div>
    </div>
    <div class="footer-wrap">
      <div class="container">
	<div tal:content="api.render_template('kotti_dkbase:templates/view/master-footer.pt')" />
      </div>
    </div>
  </body>
</html>
